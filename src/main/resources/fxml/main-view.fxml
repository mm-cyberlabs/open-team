<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.image.*?>
<?import io.github.palexdev.materialfx.controls.*?>

<BorderPane xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.openteam.controller.MainController">
   <top>
      <VBox styleClass="top-section">
         <children>
            <!-- Header Row with Logo and User Controls -->
            <HBox styleClass="header-row">
               <children>
                  <ImageView fitHeight="32.0" fitWidth="32.0" preserveRatio="true" styleClass="app-logo">
                     <image>
                        <Image url="@../icons/openteam-logo.png" />
                     </image>
                  </ImageView>
                  <Label styleClass="app-title" text="Open Team" />
                  <Region HBox.hgrow="ALWAYS" />
                  <HBox styleClass="top-toolbar" spacing="8" alignment="CENTER">
                     <children>
                        <VBox spacing="2" styleClass="user-info-container" alignment="CENTER_LEFT">
                           <children>
                              <Label fx:id="userInfoLabel" styleClass="user-info-label" text="User Info" />
                              <HBox spacing="8" alignment="CENTER_LEFT" styleClass="workspace-row">
                                 <children>
                                    <Label fx:id="workspaceInfoLabel" styleClass="workspace-info-label" text="Workspace: --" />
                                    <MFXComboBox fx:id="workspaceNavigationCombo" styleClass="workspace-navigation-combo" visible="false" 
                                                 minWidth="120" maxWidth="200" prefWidth="150" />
                                 </children>
                              </HBox>
                           </children>
                        </VBox>
                        <MFXButton fx:id="adminButton" styleClass="toolbar-button admin-button" text="ðŸ‘¤" visible="false" />
                        <MFXButton onAction="#refreshCurrentView" styleClass="toolbar-button refresh-button" text="ðŸ”„" />
                        <MFXButton onAction="#showAbout" styleClass="toolbar-button about-button" text="â„¹ï¸" />
                        <MFXButton fx:id="logoutButton" styleClass="toolbar-button logout-button" text="ðŸšª" />
                     </children>
                  </HBox>
               </children>
            </HBox>
            
            <!-- Tab Row -->
            <HBox styleClass="tab-row">
               <children>
                  <Region HBox.hgrow="ALWAYS" />
                  <TabPane fx:id="mainTabPane" styleClass="main-tabs" tabClosingPolicy="UNAVAILABLE">
                     <tabs>
                        <Tab fx:id="announcementsTab" styleClass="nav-tab" text="ðŸ“¢ Announcements" />
                        <Tab fx:id="targetDatesTab" styleClass="nav-tab" text="ðŸŽ¯ Target Dates" />
                        <Tab fx:id="deploymentsTab" styleClass="nav-tab" text="ðŸš€ Deployments" />
                     </tabs>
                  </TabPane>
                  <Region HBox.hgrow="ALWAYS" />
               </children>
            </HBox>
         </children>
      </VBox>
   </top>
   <center>
      <StackPane fx:id="contentArea" />
   </center>
   <bottom>
      <HBox styleClass="status-bar">
         <children>
            <Label fx:id="lastUpdateLabel" text="Last updated: --" />
         </children>
      </HBox>
   </bottom>
</BorderPane>